##################
#                #
#     simple     #
#   .tmux.conf   #
#    chiaretto   #
#                #
##################

######################## Good practice ##########################
#   set  --> set-option											#
#   setw --> set-window-option									#
#   run  --> run-shell											#
#   bind --> bind-key											#
#       -r flag: enable keep hitting bind key without prefix	#
#       -n flag: enable bind key without prefix					#
#       -g flag: global											#
#################################################################

######### Choose your own colours ##########
# for i in {0..255} ; do                   #
#    printf "\x1b[38;5;${i}mcolour${i}\n"; #
# done                                     #
############################################

# Changing C-b to C-a
unbind C-b
set -g prefix C-s
bind C-a send-prefix

# Exit when press ESC (changed from 500ms do 0)
set -sg escape-time 0

# Change tmux term from screen to screen-256color
set -g default-terminal "xterm-256color"

# When a smaller terminal connects to a tmux client, it shrinks to fit it.
setw -g aggressive-resize on

# Split panes using | and -
bind -n C-\ split-window -h
bind \ split-window -h
bind - split-window -v
unbind '"'
unbind %

# Rename Session
unbind '.'
bind . command-prompt "rename-session '%%'"

# Rename Window
unbind ','
bind , command-prompt "rename-window '%%'"

# Create new session
unbind n
bind n command-prompt "new-session -s '%%'"

# Auto rename
setw -g automatic-rename on
setw -g automatic-rename-format '#{pane_title}'
bind -n C-t new-window

# Sync panes on/off
bind a set-window-option synchronize-panes

# Switch Windows (Shift + Arrow keys)
bind -n S-right next-window
bind -n S-left previous-window

# Pane colours
set -g window-style 'fg=colour247,bg=colour236'
set -g window-active-style 'fg=colour250,bg=black'
#set -g pane-border-bg colour235
set -g pane-border-fg colour237
set -g pane-active-border-bg colour250
set -g pane-active-border-fg colour237

# message infos
set -g message-bg colour239 #bg2
set -g message-fg colour223 #fg1

# writting commands inactive
set -g message-command-bg colour239 #fg3
set -g message-command-fg colour223 #bg1

# pane number display
set -g display-panes-active-colour colour250 #fg2
set -g display-panes-colour colour237 #bg1

# clock
set-window-option -g clock-mode-colour colour109 #blue

# Switch panes (Ctrl + Arrow keys)
bind -n C-Left select-pane -L
bind -n C-Right select-pane -R
bind -n C-Up select-pane -U
bind -n C-Down select-pane -D

# Switch panes using Alt-arrow without prefix (MAC)
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Change panel orders (Ctrl + Shift + Arrow keys)
bind -n C-S-Left swap-window -t -1
bind -n C-S-Right swap-window -t +1

# Resizing panel (Alt + Shift + Arrow keys)
bind -n M-S-Left resize-pane -L
bind -n M-S-Right resize-pane -R
bind -n M-S-Up resize-pane -U
bind -n M-S-Down resize-pane -D

# Quiet mode
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
set -g bell-action none
setw -g monitor-activity off

# The statusbar 
# default statusbar colors
set -g status-bg colour237 #bg1
set -g status-fg colour223 #fg1

# default window title colors
set-window-option -g window-status-bg colour237 #yellow
set-window-option -g window-status-fg colour237 #bg1

set-window-option -g window-status-activity-bg colour237 #bg1
set-window-option -g window-status-activity-fg colour248 #fg3

# active window title colors
set-window-option -g window-status-current-bg colour237
set-window-option -g window-status-current-fg colour237 #bg1

set -g status-position bottom
set -g status-left-length 50
set -g status-left "#[fg=white, bg=colour237][#S] #[fg=white, bg=colour237]| "
set -g status-right "#[fg=white, bg=colour237][#(TZ=America/Sao_Paulo date '+%%d-%%m-%%Y %%H:%%M')]"

#set -g window-status-current-attr bold
set -g window-status-current-format '#[fg=colour214, bg=colour237]#W#[fg=white, bg=colour237] |'
set -g window-status-format '#[fg=white, bg=colour237]#W#[fg=white, bg=colour237] |'

# Enable mouse selection
set -g mouse on

# Paste
bind -T root MouseDown2Pane run -b "tmux paste-buffer"
bind -T root C-v run -b "tmux paste-buffer"

# Choose which buffer to paste from
bind b choose-buffer

# Boost history
set -g history-limit 10000

# Reload tmux config
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded."

# Change format choose-tree 
bind -r w choose-window -F '#{window_name}'
bind -r s choose-session -F '#{window_name}'

# Bind k to kill-window
bind k confirm kill-window

# Change to yellow when selected
#set mode-style fg=yellow

# Install plugins
set -g @plugin 'tmux-plugins/tmux-resurrect'

set -g @resurrect-processes 'ssh'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
run-shell '~/.tmux/plugins/tmux-resurrect/resurrect.tmux'
